/* ----------------------------------
jQuery Timelinr 0.9.52
tested with jQuery v1.6+

Copyright 2011, CSSLab.cl
Free under the MIT license.
http://www.opensource.org/licenses/mit-license.php

instructions: http://www.csslab.cl/2011/08/18/jquery-timelinr/
---------------------------------- */
(function(a){a.fn.timelinr=function(i){settings=a.extend({orientation:"horizontal",containerDiv:"#timeline",datesDiv:"#dates",datesSelectedClass:"selected",datesSpeed:"normal",issuesDiv:"#issues",issuesSelectedClass:"selected",issuesSpeed:"fast",issuesTransparency:0.2,issuesTransparencySpeed:500,prevButton:"#prev",nextButton:"#next",arrowKeys:"false",startAt:1,autoPlay:"false",autoPlayDirection:"forward",autoPlayPause:2E3},i);a(function(){var k=a(settings.datesDiv+" li").length,h=a(settings.issuesDiv+
" li").length;a(settings.datesDiv).find("a."+settings.datesSelectedClass);a(settings.issuesDiv).find("li."+settings.issuesSelectedClass);var i=a(settings.containerDiv).width(),l=a(settings.containerDiv).height();a(settings.issuesDiv).width();a(settings.issuesDiv).height();var d=a(settings.issuesDiv+" li").width(),e=a(settings.issuesDiv+" li").height();a(settings.datesDiv).width();a(settings.datesDiv).height();var f=a(settings.datesDiv+" li").width(),g=a(settings.datesDiv+" li").height();if("horizontal"==
settings.orientation){a(settings.issuesDiv).width(d*h);a(settings.datesDiv).width(f*k).css("marginLeft",i/2-f/2);var j=parseInt(a(settings.datesDiv).css("marginLeft").substring(0,a(settings.datesDiv).css("marginLeft").indexOf("px")))}else"vertical"==settings.orientation&&(a(settings.issuesDiv).height(e*h),a(settings.datesDiv).height(g*k).css("marginTop",l/2-g/2),j=parseInt(a(settings.datesDiv).css("marginTop").substring(0,a(settings.datesDiv).css("marginTop").indexOf("px"))));a(settings.datesDiv+
" a").click(function(b){b.preventDefault();a(this).text();b=a(this).parent().prevAll().length;"horizontal"==settings.orientation?a(settings.issuesDiv).animate({marginLeft:-d*b},{queue:!1,duration:settings.issuesSpeed}):"vertical"==settings.orientation&&a(settings.issuesDiv).animate({marginTop:-e*b},{queue:!1,duration:settings.issuesSpeed});a(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}).removeClass(settings.issuesSelectedClass).eq(b).addClass(settings.issuesSelectedClass).fadeTo(settings.issuesTransparencySpeed,
1);a(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?a(settings.prevButton).fadeOut("fast"):a(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)?a(settings.nextButton).fadeOut("fast"):a(settings.nextButton+","+settings.prevButton).fadeIn("slow");a(settings.datesDiv+" a").removeClass(settings.datesSelectedClass);a(this).addClass(settings.datesSelectedClass);"horizontal"==settings.orientation?a(settings.datesDiv).animate({marginLeft:j-f*b},{queue:!1,
duration:"settings.datesSpeed"}):"vertical"==settings.orientation&&a(settings.datesDiv).animate({marginTop:j-g*b},{queue:!1,duration:"settings.datesSpeed"})});a(settings.nextButton).bind("click",function(b){b.preventDefault();if("horizontal"==settings.orientation){var b=parseInt(a(settings.issuesDiv).css("marginLeft").substring(0,a(settings.issuesDiv).css("marginLeft").indexOf("px"))),c=parseInt(a(settings.datesDiv).css("marginLeft").substring(0,a(settings.datesDiv).css("marginLeft").indexOf("px"))),
c=c-f;b<=-(d*h-d)?(a(settings.issuesDiv).stop(),a(settings.datesDiv+" li:last-child a").click()):a(settings.issuesDiv).is(":animated")||(a(settings.issuesDiv).animate({marginLeft:b-d},{queue:!1,duration:settings.issuesSpeed}),a(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}),a(settings.issuesDiv+" li."+settings.issuesSelectedClass).removeClass(settings.issuesSelectedClass).next().fadeTo(settings.issuesTransparencySpeed,1).addClass(settings.issuesSelectedClass),
a(settings.datesDiv).animate({marginLeft:c},{queue:!1,duration:"settings.datesSpeed"}),a(settings.datesDiv+" a."+settings.datesSelectedClass).removeClass(settings.datesSelectedClass).parent().next().children().addClass(settings.datesSelectedClass))}else"vertical"==settings.orientation&&(b=parseInt(a(settings.issuesDiv).css("marginTop").substring(0,a(settings.issuesDiv).css("marginTop").indexOf("px"))),c=parseInt(a(settings.datesDiv).css("marginTop").substring(0,a(settings.datesDiv).css("marginTop").indexOf("px"))),
c-=g,b<=-(e*h-e)?(a(settings.issuesDiv).stop(),a(settings.datesDiv+" li:last-child a").click()):a(settings.issuesDiv).is(":animated")||(a(settings.issuesDiv).animate({marginTop:b-e},{queue:!1,duration:settings.issuesSpeed}),a(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}),a(settings.issuesDiv+" li."+settings.issuesSelectedClass).removeClass(settings.issuesSelectedClass).next().fadeTo(settings.issuesTransparencySpeed,1).addClass(settings.issuesSelectedClass),
a(settings.datesDiv).animate({marginTop:c},{queue:!1,duration:"settings.datesSpeed"}),a(settings.datesDiv+" a."+settings.datesSelectedClass).removeClass(settings.datesSelectedClass).parent().next().children().addClass(settings.datesSelectedClass)));a(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?a(settings.prevButton).fadeOut("fast"):a(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)?a(settings.nextButton).fadeOut("fast"):a(settings.nextButton+
","+settings.prevButton).fadeIn("slow")});a(settings.prevButton).click(function(b){b.preventDefault();if("horizontal"==settings.orientation){var b=parseInt(a(settings.issuesDiv).css("marginLeft").substring(0,a(settings.issuesDiv).css("marginLeft").indexOf("px"))),c=parseInt(a(settings.datesDiv).css("marginLeft").substring(0,a(settings.datesDiv).css("marginLeft").indexOf("px"))),c=c+f;0<=b?(a(settings.issuesDiv).stop(),a(settings.datesDiv+" li:first-child a").click()):a(settings.issuesDiv).is(":animated")||
(a(settings.issuesDiv).animate({marginLeft:b+d},{queue:!1,duration:settings.issuesSpeed}),a(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}),a(settings.issuesDiv+" li."+settings.issuesSelectedClass).removeClass(settings.issuesSelectedClass).prev().fadeTo(settings.issuesTransparencySpeed,1).addClass(settings.issuesSelectedClass),a(settings.datesDiv).animate({marginLeft:c},{queue:!1,duration:"settings.datesSpeed"}),a(settings.datesDiv+
" a."+settings.datesSelectedClass).removeClass(settings.datesSelectedClass).parent().prev().children().addClass(settings.datesSelectedClass))}else"vertical"==settings.orientation&&(b=parseInt(a(settings.issuesDiv).css("marginTop").substring(0,a(settings.issuesDiv).css("marginTop").indexOf("px"))),c=parseInt(a(settings.datesDiv).css("marginTop").substring(0,a(settings.datesDiv).css("marginTop").indexOf("px"))),c+=g,0<=b?(a(settings.issuesDiv).stop(),a(settings.datesDiv+" li:first-child a").click()):
a(settings.issuesDiv).is(":animated")||(a(settings.issuesDiv).animate({marginTop:b+e},{queue:!1,duration:settings.issuesSpeed}),a(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}),a(settings.issuesDiv+" li."+settings.issuesSelectedClass).removeClass(settings.issuesSelectedClass).prev().fadeTo(settings.issuesTransparencySpeed,1).addClass(settings.issuesSelectedClass),a(settings.datesDiv).animate({marginTop:c},{queue:!1,duration:"settings.datesSpeed"},
{queue:!1,duration:settings.issuesSpeed}),a(settings.datesDiv+" a."+settings.datesSelectedClass).removeClass(settings.datesSelectedClass).parent().prev().children().addClass(settings.datesSelectedClass)));a(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?a(settings.prevButton).fadeOut("fast"):a(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)?a(settings.nextButton).fadeOut("fast"):a(settings.nextButton+","+settings.prevButton).fadeIn("slow")});
"true"==settings.arrowKeys&&("horizontal"==settings.orientation?a(document).keydown(function(b){39==b.keyCode&&a(settings.nextButton).click();37==b.keyCode&&a(settings.prevButton).click()}):"vertical"==settings.orientation&&a(document).keydown(function(b){40==b.keyCode&&a(settings.nextButton).click();38==b.keyCode&&a(settings.prevButton).click()}));a(settings.datesDiv+" li").eq(settings.startAt-1).find("a").trigger("click");"true"==settings.autoPlay&&setInterval("autoPlay()",settings.autoPlayPause)})}})(jQuery);
